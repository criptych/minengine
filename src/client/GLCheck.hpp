////////////////////////////////////////////////////////////////////////////////
//
////////////////////////////////////////////////////////////////////////////////

#ifndef __GLCHECK_HPP__
#define __GLCHECK_HPP__ 1

////////////////////////////////////////////////////////////////////////////////

static inline void GLClearErrors() {
    GLenum errcode;

    while ( (errcode = glGetError()) ) {
        // ignore
    }
}

static inline void _GLCheckErrors(const char *file, int line) {
    GLenum errcode;

    while ( (errcode = glGetError()) ) {
        std::fprintf(stderr, "GL Error: %s(%d): %s\n", file, line,
            gluErrorString(errcode)
        );
    }
}

#define GLCheckErrors() _GLCheckErrors(__FILE__, __LINE__)

#ifndef NDEBUG
# define GLChecked(f) (f,GLCheckErrors())
#else
# define GLChecked(f) f
#endif

////////////////////////////////////////////////////////////////////////////////

#endif // __GLCHECK_HPP__

////////////////////////////////////////////////////////////////////////////////
//  EOF
////////////////////////////////////////////////////////////////////////////////

